<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supply Chain Command Center</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <!-- CDN Libraries (No NPM needed) -->
    <script src="https://unpkg.com/enigma.js@2.4.0/enigma.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="brand-section" id="brand-logo">
                <span>üì¶</span> Qlik Analytical
            </div>
            <nav class="nav-links">
                <div class="nav-link active" id="nav-intro">
                    <span>üìò</span> Project Guide
                </div>
                <div class="nav-link" id="nav-ai">
                    <span>ü§ñ</span> Ask AI Analyst
                </div>
                <div class="nav-link" id="nav-overview">
                    <span>üìä</span> Overview
                </div>
                <div class="nav-link" id="nav-sales">
                    <span>üí∞</span> Sales Trends
                </div>
                <div class="nav-link" id="nav-shipping">
                    <span>üöö</span> Shipping
                </div>
                <div class="nav-link" id="nav-products">
                    <span>üì¶</span> Products
                </div>
                <!-- NAV DATA REMOVED -->
                <div class="nav-link" id="nav-settings">
                    <span>‚öôÔ∏è</span> Settings
                </div>
            </nav>
            <div class="sidebar-footer">
                <!-- LOG CONTAINER -->
                <div id="ui-log"
                    style="font-family:monospace; font-size:10px; color:#aaa; margin-top:10px; max-height:100px; overflow-y:auto; word-break:break-all;">
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- HEADER -->
            <header class="top-header">
                <div class="page-title">
                    <h1 id="page-heading">Project Architecture</h1>
                    <p>Dataset Specifications & Analytical Strategy</p>
                </div>
                <div class="header-actions">
                    <!-- CLEAR SELECTIONS BUTTON ONLY -->
                    <div style="display:flex; gap:10px; align-items:center;">
                        <button onclick="if(app) app.clearAll()"
                            style="background:white; border:1px solid #ccc; padding:6px 12px; border-radius:6px; font-size:12px; cursor:pointer; color:#333; display:flex; align-items:center; gap:5px;">
                            <span>‚úñ</span> Clear Filters
                        </button>
                    </div>
                </div>
            </header>

            <!-- STATUS STRIP -->
            <div class="connection-bar">
                <div class="status-indicator">
                    <div class="dot" id="dot-status"></div>
                    <span id="txt-status">Connecting to Qlik Cloud...</span>
                </div>
                <div style="margin-left:auto; font-size:11px; color:#aaa;">Last Updated: Just Now</div>
            </div>

            <!-- DASHBOARD SCROLL AREA -->
            <div class="dashboard-scroll">

                <!-- 0. PROJECT GUIDE (Intro) -->
                <div id="view-intro" class="view-section">
                    <div class="dashboard-grid">

                        <!-- HERO CARD -->
                        <div class="card span-4"
                            style="background: linear-gradient(135deg, #009845 0%, #006030 100%); color:white; border:none;">
                            <h2 style="font-size:24px; margin-bottom:10px;">üöÄ Supply Chain Analytics Suite</h2>
                            <p style="opacity:0.9; max-width:800px; line-height:1.5;">
                                A production-grade analytics platform powered by the <strong>Qlik Associative
                                    Engine</strong>.
                                This project transforms raw transaction data into actionable intelligence, enabling
                                organizations to optimize logistics,
                                enhance profitability, and predict inventory needs.
                            </p>
                            <div style="margin-top:20px; display:flex; gap:15px;">
                                <span
                                    style="background:rgba(255,255,255,0.2); padding:5px 10px; border-radius:4px; font-size:12px;">9,994
                                    Rows</span>
                                <span
                                    style="background:rgba(255,255,255,0.2); padding:5px 10px; border-radius:4px; font-size:12px;">21
                                    Columns</span>
                                <span
                                    style="background:rgba(255,255,255,0.2); padding:5px 10px; border-radius:4px; font-size:12px;">4-Year
                                    History</span>
                            </div>
                        </div>

                        <!-- DATASET DETAILS -->
                        <div class="card span-2">
                            <div class="card-title">üìÇ The Dataset: "Superstore Sales"</div>
                            <p style="font-size:13px; color:#555; line-height:1.6; margin-bottom:15px;">
                                We utilize the industry-standard "Global Superstore" supply chain dataset. It represents
                                a realistic retail environment tackling
                                <strong>Logistics, Sales, and Profitability</strong> challenges.
                            </p>
                            <div style="font-size:12px; font-weight:600; color:#333; margin-bottom:8px;">KEY DIMENSIONS:
                            </div>
                            <div style="display:flex; flex-wrap:wrap; gap:8px;">
                                <span class="pill-badge">üåç Region</span>
                                <span class="pill-badge">üì¶ Category</span>
                                <span class="pill-badge">üöö Ship Mode</span>
                                <span class="pill-badge">üèôÔ∏è Segment</span>
                            </div>
                            <div
                                style="font-size:12px; font-weight:600; color:#333; margin-bottom:8px; margin-top:15px;">
                                KEY METRICS:</div>
                            <div style="display:flex; flex-wrap:wrap; gap:8px;">
                                <span class="pill-badge green">üí∞ Sales</span>
                                <span class="pill-badge green">üìà Profit</span>
                                <span class="pill-badge red">üîª Discount</span>
                                <span class="pill-badge blue">üö¢ Shipping Cost</span>
                            </div>
                        </div>

                        <!-- METHODOLOGY -->
                        <div class="card span-2">
                            <div class="card-title">üß† Analytical Methodology</div>
                            <ul style="font-size:13px; color:#555; line-height:1.8; padding-left:20px;">
                                <li><strong>Pareto Analysis (80/20):</strong> Identifying the top 20% of products
                                    driving 80% of profit.</li>
                                <li><strong>Whale Curve Strategy:</strong> Detecting "profit-draining" customers who
                                    generate sales but negative margin.</li>
                                <li><strong>Logistics Efficiency:</strong> Analyzing correlation between shipping modes
                                    (First Class vs Standard) and cost ratios.</li>
                                <li><strong>Cluster Detection:</strong> Grouping regions by "Discount Discipline" to
                                    stop value leakage.</li>
                            </ul>
                        </div>

                        <!-- VALUE PROP -->
                        <div class="card span-2">
                            <div class="card-title">üë§ For Users (Operational)</div>
                            <div
                                style="background:#f9f9f9; padding:15px; border-radius:6px; border-left:4px solid #3B82F6;">
                                <h4 style="margin:0 0 5px 0; color:#3B82F6;">Tactical Decision Support</h4>
                                <p style="font-size:12px; color:#666; margin:0;">
                                    "Should I approve this discount?"<br>
                                    "Which shipping method maintains margin?"<br>
                                    Instantly filter by Region/Category to answer day-to-day fulfillment questions.
                                </p>
                            </div>
                        </div>

                        <div class="card span-2">
                            <div class="card-title">üëî For Admins (Strategic)</div>
                            <div
                                style="background:#f9f9f9; padding:15px; border-radius:6px; border-left:4px solid #009845;">
                                <h4 style="margin:0 0 5px 0; color:#009845;">Executive Command</h4>
                                <p style="font-size:12px; color:#666; margin:0;">
                                    "Where are we bleeding profit?"<br>
                                    "Is our inventory mix healthy?"<br>
                                    High-level KPIs and Trend Analysis to steer company policy and supplier
                                    negotiations.
                                </p>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- 0.5 AI ANALYST VIEW -->
                <div id="view-ai" class="view-section" style="display:none;">
                    <div style="max-width:800px; margin:0 auto; padding:20px;">

                        <!-- AI INPUT -->
                        <div
                            style="background:white; padding:30px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1); text-align:center;">
                            <h2 style="color:#333; margin-bottom:10px;">ü§ñ Artificial Intelligence Analyst</h2>
                            <p style="color:#666; font-size:13px; margin-bottom:20px;">Ask questions in natural
                                language. The system will auto-generate the optimal Qlik visualization.</p>

                            <div style="display:flex; gap:10px; max-width:600px; margin:0 auto; align-items:center;">
                                <input type="text" id="ai-input"
                                    placeholder="e.g. 'Show me Sales by Region' or 'Analyze Profit vs Discount'"
                                    style="flex:1; padding:12px 20px; border:2px solid #e0e0e0; border-radius:8px; font-size:14px; outline:none; transition:0.3s;">

                                <!-- VOICE BUTTON -->
                                <button id="btn-mic" onclick="startVoice()" title="Speak Command"
                                    style="background:white; border:2px solid #e0e0e0; border-radius:50%; width:46px; height:46px; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:0.2s;">
                                    <span style="font-size:20px;">üéôÔ∏è</span>
                                </button>

                                <button id="btn-ask-ai"
                                    style="background:#009845; color:white; border:none; padding:0 25px; border-radius:8px; font-weight:600; cursor:pointer; transition:0.2s; height:46px;">
                                    GENERATE
                                </button>
                            </div>

                            <!-- SUGGESTIONS -->
                            <div style="margin-top:15px; display:flex; justify-content:center; gap:8px;">
                                <span class="pill-badge blue" style="cursor:pointer;"
                                    onclick="setAsk('Sales by Category')">Sales by Category</span>
                                <span class="pill-badge green" style="cursor:pointer;"
                                    onclick="setAsk('Profit across Regions')">Profit across Regions</span>
                                <span class="pill-badge red" style="cursor:pointer;"
                                    onclick="setAsk('Shipping Cost by Ship Mode')">Shipping Cost by Ship Mode</span>
                            </div>
                        </div>

                        <!-- RESULTS AREA -->
                        <div id="ai-loading" style="display:none; text-align:center; margin-top:40px; color:#666;">
                            <div class="dot ok" style="display:inline-block; animation: pulse 1s infinite;"></div>
                            Thinking...
                        </div>

                        <div id="ai-result-card" class="card" style="margin-top:20px; min-height:400px; display:none;">
                            <div class="card-title">
                                <span id="ai-chart-title">Visual Answer</span>
                                <span
                                    style="font-size:10px; background:#e0e0e0; padding:2px 6px; border-radius:4px;">GENERATED
                                    BY QLIK AI ANALYST</span>
                            </div>
                            <div class="chart-container">
                                <canvas id="chart-ai"></canvas>
                            </div>
                        </div>

                    </div>

                    <script>
                        function setAsk(txt) {
                            document.getElementById('ai-input').value = txt;
                            document.getElementById('btn-ask-ai').click();
                        }
                    </script>
                </div>

                <!-- DATASET EXPLORER REMOVED -->

                <!-- 1. OVERVIEW VIEW -->
                <div id="view-overview" class="view-section" style="display:none;">
                    <!-- KPIs -->
                    <div class="dashboard-grid kpi-row">
                        <div class="card span-1 h-kpi">
                            <div class="card-title">Revenue</div>
                            <div class="metric-value" id="kpi-sales">--</div>
                            <div class="card-footer">Total Sales</div>
                        </div>
                        <div class="card span-1 h-kpi">
                            <div class="card-title">Margin %</div>
                            <div class="metric-value" id="kpi-margin">--</div>
                            <div class="card-footer">Profitability</div>
                        </div>
                        <div class="card span-1 h-kpi">
                            <div class="card-title">Cost Ratio</div>
                            <div class="metric-value" id="kpi-otif">--</div>
                            <div class="card-footer">Logistics Impact</div>
                        </div>
                        <div class="card span-1 h-kpi">
                            <div class="card-title">Avg Discount</div>
                            <div class="metric-value" id="kpi-orders">--</div>
                            <div class="card-footer">Pricing Discipline</div>
                        </div>
                    </div>
                    <!-- Overview Charts -->
                    <div class="dashboard-grid">
                        <div class="card span-2 h-chart">
                            <div class="card-title">Sales vs Profit (Pareto)</div>
                            <div class="chart-container"><canvas id="chart-combo"></canvas></div>
                        </div>
                        <div class="card span-2 h-chart">
                            <div class="card-title">Discount by Region</div>
                            <div class="chart-container"><canvas id="chart-radar"></canvas></div>
                        </div>
                    </div>
                </div>

                <!-- 2. SALES VIEW -->
                <div id="view-sales" class="view-section" style="display:none;">
                    <div class="dashboard-grid">
                        <div class="card span-4 h-chart">
                            <div class="card-title">Customer Profitability Matrix</div>
                            <div class="chart-container"><canvas id="chart-scatter"></canvas></div>
                        </div>
                    </div>
                </div>

                <!-- 3. SHIPPING VIEW -->
                <div id="view-shipping" class="view-section" style="display:none;">
                    <div class="dashboard-grid">
                        <div class="card span-2 h-chart">
                            <div class="card-title">Shipping Cost by Mode</div>
                            <div class="chart-container"><canvas id="chart-ship-mode"></canvas></div>
                        </div>
                        <div class="card span-2 h-chart">
                            <div class="card-title">Shipping Cost vs Sales</div>
                            <div class="chart-container"><canvas id="chart-ship-cost"></canvas></div>
                        </div>
                    </div>
                </div>

                <!-- 4. PRODUCTS VIEW -->
                <div id="view-products" class="view-section" style="display:none;">
                    <div class="dashboard-grid">
                        <div class="card span-4 h-chart">
                            <div class="card-title">Product Category Performance</div>
                            <div class="chart-container"><canvas id="chart-product-bar"></canvas></div>
                        </div>
                    </div>
                </div>

                <!-- 5. SETTINGS VIEW -->
                <div id="view-settings" class="view-section" style="display:none;">
                    <div class="dashboard-grid">
                        <div class="card span-2" style="height:auto;">
                            <div class="card-title">üé® Appearance</div>
                            <div
                                style="margin-top:20px; display:flex; justify-content:space-between; align-items:center;">
                                <span>Dark Mode (Cyber Theme)</span>
                                <label class="switch">
                                    <input type="checkbox" id="toggle-theme">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            <p style="font-size:12px; color:#aaa; margin-top:10px;">Switch between Executive Light and
                                Operation Dark modes.</p>
                        </div>

                        <div class="card span-2" style="height:auto;">
                            <div class="card-title">ü§ñ AI Enhancement</div>
                            <div
                                style="margin-top:20px; display:flex; justify-content:space-between; align-items:center;">
                                <span>Predictive Inventory Models</span>
                                <label class="switch">
                                    <input type="checkbox" checked disabled>
                                    <span class="slider round" style="background-color:#009845;"></span>
                                </label>
                            </div>
                            <p style="font-size:12px; color:#aaa; margin-top:10px;">Using Linear Regression for Stockout
                                Prediction (Active).</p>
                        </div>

                        <div class="card span-4" style="height:auto;">
                            <div class="card-title">üë§ User Session</div>
                            <div style="display:flex; align-items:center; gap:20px; margin-top:15px;">
                                <div
                                    style="width:50px; height:50px; background:#e0e0e0; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:24px;">
                                    üëî</div>
                                <div>
                                    <div style="font-weight:bold;">Guest Recruiter</div>
                                    <div style="font-size:12px; color:#666;">Access Level: Read-Only Executive</div>
                                </div>
                                <div
                                    style="margin-left:auto; color:#009845; font-size:12px; background:#e6f8ec; padding:4px 8px; border-radius:4px;">
                                    ‚óè Active Session
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Global Footer -->
                <footer class="main-footer"
                    style="text-align:center; padding:20px; color:#aaa; font-size:12px; margin-top:40px; border-top:1px solid #eee;">
                    <div style="color:var(--text-primary); font-weight:600; margin-bottom:5px;">
                        Developed & Maintained by Harish A.S | 2025 All Rights Reserved
                    </div>
                    <div>
                        Contact: <span style="color:#F59E0B;">9994463686</span> | Email: <span
                            style="color:#F59E0B;">anandhunharish@gmail.com</span>
                    </div>
                </footer>

                <!-- DEBUG (Safe at bottom) -->
                <div id="debug-console"
                    style="border-top:1px solid #eee; padding-top:20px; font-family:monospace; font-size:10px; color:#aaa;">
                </div>
            </div>
        </main>
    </div>

    <!-- SCRIPTS -->
    <script src="mock-app.js"></script>
    <script src="connect.js"></script>
    <script src="index.js"></script>
    <script>
        // Simple Console Redirect
        window.log = function (msg) {
            const el = document.getElementById('debug-console');
            if (el) {
                el.innerHTML = `> ${msg}<br>` + el.innerHTML.substring(0, 500); // Keep styling clean
            }
            console.log(msg);
        }
    </script>
</body>

</html>